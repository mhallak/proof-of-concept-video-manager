1. Found: https://linuxtv.org/wiki/index.php/V4L_capturing
1.5 loading kernel module https://www.tecmint.com/load-and-unload-kernel-modules-in-linux/
1.5+: mod info: /sbin/modinfo tw6869
2. Installed mpv: mpv av://v4l2:/dev/video0 tv:///0 works
6. check capabilities of camera /dev/video0
gst-launch-1.0 --gst-debug=v4l2src:5 v4l2src device="/dev/video0" ! fakesink 2>&1 | sed -une '/caps of src/ s/[:;] /\n/gp'
7. capture in a file: sensoray_testing/capture -d /dev/video1 -f -c 100 -o > input.yuv
8. play file with gstreamer:
gst-launch-1.0 filesrc location=./input.yuv ! videoparse height=576 width=704 format=uyvy framerate=1/25 ! queue ! videoconvert ! xvimagesink sync=false
9. play with vlc:
vlc --demux rawvideo --rawvid-fps 25 --rawvid-width 704 --rawvid-height 576 --rawvid-chroma UYVY input.yuv  
10. gstreamer proper errored pipe:
gst-launch-1.0 v4l2src device=/dev/video0 ! video/x-raw, width=704, height=576, format=UYVY ! queue ! videoconvert ! xvimagesink sync=false
11. Probe video driver: v4l2-ctl -d /dev/video1 -D -V
12. display kernel: tail -f /var/log/syslog
***********************************************************************************************************************************
13. Good pipe: see http://www.sensoray.com/wiki/index.php?title=812/1012_gstreamer
gst-launch-1.0 -v v4l2src device=/dev/video3 ! video/x-raw,format=UYVY,interlace-mode=interleaved ! videoconvert ! xvimagesink
***************************************************************************************************************************************

14. vlc: vlc v4l2:///dev/video0

15. Start:
https://developer.download.nvidia.com/embedded/L4T/r32_Release_v1.0/Docs/Accelerated_GStreamer_User_Guide.pdf?qXQjluvwcY1jULNlXsegnlP8MjAuFs9dj_ClDRWCDsNZqizARm9t6yiKQFJqeZQe4DenNx-1YVznnaEq88Wwss1wM0GUSiqW3VY6PKCARoJbVLTX_K4oyXU-6-A6RkLGa-5GnT7W87PGirJCfh2eIs9entPLDZ_p_qtRjQ21SpCOwkSav6c

16. Good pipelines: ************do not use omx****
gst-launch-1.0 filesrc location=pedestrians.mp4 ! qtdemux ! queue ! h264parse ! nvv4l2decoder ! nv3dsink -e
better performance:
gst-launch-1.0 filesrc location=pedestrians.mp4 ! qtdemux ! queue ! h264parse ! nvv4l2decoder enable-max-performance=1 ! nv3dsink -e

17. Samples
https://kodi.wiki/view/Samples

18. Extraordinary video quality:
gst-launch-1.0 filesrc location=jellyfish-400-mbps-4k-uhd-hevc-10bit.mkv ! matroskademux ! queue ! h265parse ! nvv4l2decoder ! nvvidconv ! 'video/x-raw(memory:NVMM), format=(string)NV12' ! nv3dsink -e
Nice h265:
gst-launch-1.0 filesrc location=sample_1080p_h265.mp4 ! qtdemux ! queue ! h265parse ! nvv4l2decoder ! nv3dsink -e
Image:
gst-launch-1.0 filesrc location=baboon.jpg ! nvjpegdec ! imagefreeze ! xvimagesink -e

19. Encoding
Should be:
gst-launch-1.0  nvarguscamerasrc ! 'video/x-raw(memory:NVMM), width=(int)1920, height=(int)1080, format=(string)NV12, framerate=(fraction)30/1' ! nvv4l2h264enc bitrate=8000000 ! h264parse ! qtmux ! filesink location=michele_test_h264.mp4 -e
But I tried that:
gst-launch-1.0 videotestsrc ! 'video/x-raw(memory:NVMM), width=(int)1920, height=(int)1080, format=(string)NV12, framerate=(fraction)30/1' ! nvv4l2h264enc bitrate=8000000 ! h264parse ! qtmux ! filesink location=michele_test_h264.mp4 -e
Problem with this testsrc to encode h264 - no camera connected right now.

JPEG Encode
gst-launch-1.0 videotestsrc num-buffers=1 ! 'video/x-raw, width=(int)640, height=(int)480,  format=(string)I420' ! nvjpegenc ! filesink location=micheletest.jpg -e

20. Spoil a good image:
gst-launch-1.0 filesrc location=baboon.jpg ! nvjpegdec ! 'video/x-raw, format=(string)I420' ! nvjpegenc ! filesink location=tryingbaboon.jpg -e

21. Resolution ffmpeg
ffmpeg -i <file name>

22. Tegra release:
head -n 1 /etc/nv_tegra_release
[full info: cat /etc/nv_tegra_release]

23. Create a h264 movie from videotestsrc with nvv4l2h264enc:
gst-launch-1.0 videotestsrc num-buffers=300 ! 'video/x-raw, width=(int)1280, height=(int)720, format=(string)I420, framerate=(fraction)30/1' ! nvvidconv ! 'video/x-raw(memory:NVMM), format=(string)I420' ! nvv4l2h264enc bitrate=8000000 ! h264parse ! qtmux ! filesink location=michele_test_h264.mp4 -e

24. Starting to check mixer gstreamer plugin: https://gstreamer.freedesktop.org/data/doc/gstreamer/head/gst-plugins-good/html/gst-plugins-good-plugins-videomixer.html
I420: 
gst-launch-1.0 videotestsrc pattern=1 !   video/x-raw, format=I420,  framerate=\(fraction\)10/1,width=100,height=100  !   videomixer name=mix !   videoconvert ! ximagesink   videotestsrc !   video/x-raw, format=I420, framerate=\(fraction\)5/1,width=320,height=240 ! mix. 
Complex:
gst-launch-1.0 videomixer name=mixer sink_1::alpha=0.5 sink_1::xpos=50 sink_1::ypos=50 ! videoconvert ! ximagesink videotestsrc pattern=snow timestamp-offset=3000000000 ! "video/x-raw,format=AYUV,framerate=(fraction)30/1,width=640,height=480" !   timeoverlay ! queue2 ! mixer. videotestsrc pattern=smpte !  "video/x-raw,format=AYUV,framerate=(fraction)10/1,width=800,height=600" ! queue2 ! mixer.

25. DRM Video sink
- Stop display manager:
sudo systemctl stop gdm
sudo loginctl terminate-seat seat0
- ALT+CTL+F1 ==> ALT+CTL+F5
gst-launch-1.0 filesrc location=<filename.mp4> ! \
 qtdemux! queue ! h264parse !nvv4l2decoder ! nvdrmvideosink -e
gst-launch-1.0 filesrc location=<filename.mp4> ! \
 qtdemux! queue ! h264parse ! ! nvv4l2decoder ! nvdrmvideosink \
 conn_id=0 plane_id=1 set_mode=0 -e
 
26. RTSP
References:
https://devtalk.nvidia.com/default/topic/1055034/jetson-tx2/how-to-generate-rtsp-stream-with-gstreamer-in-tx2/
==> REAL: https://devtalk.nvidia.com/default/topic/1018689/jetson-tx2/vlc-playing-gstreamer-flow/post/5187270/#5187270
sudo apt-get install libgstrtspserver-1.0 libgstreamer1.0-dev
git clone https://github.com/GStreamer/gst-rtsp-server.git
cd gst-rtsp-server/examples
gcc test-launch.c -o test-launch $(pkg-config --cflags --libs gstreamer-1.0 gstreamer-rtsp-server-1.0)
./test-launch "videotestsrc ! omxh265enc ! rtph265pay name=pay0 pt=96"

27. Important note:
VLC doesn't work on the jetson tx2 may be because no HW acceleration; the version is for the CPU only ?
https://devtalk.nvidia.com/default/topic/1004977/jetson-tx2/vlc-not-working-on-l4t-r27-0-1-/

28. Worked:
1- Record:  gst-launch-1.0 videotestsrc ! 'video/x-raw, format=(string)I420, width=(int)640,height=(int)480' ! omxh264enc ! 'video/x-h264, stream-format=(string)byte-stream' ! h264parse !  qtmux ! filesink location=simpleencode.mp4 -e
2- Play: gst-launch-1.0 filesrc location=./simpleencode.mp4 ! qtdemux ! queue ! h264parse ! nvv4l2decoder ! nv3dsink -e
1- Record: gst-launch-1.0 -v v4l2src device=/dev/video3 ! 'video/x-raw, format=(string)UYVY, width=(int)640,height=(int)480, interlace-mode=interleaved' ! videoconvert ! omxh264enc ! 'video/x-h264, stream-format=(string)byte-stream' ! h264parse !  qtmux ! filesink location=xxx.mp4 -e
2- Play: gst-launch-1.0 filesrc location=./xxx.mp4 ! qtdemux ! queue ! h264parse ! nvv4l2decoder ! nv3dsink -e 
************************************************************************************************************************************************
1-2: Stream camera: ./test-launch "v4l2src device="/dev/video3" ! video/x-raw,format=UYVY,interlace-mode=interleaved! videoconvert ! omxh265enc ! rtph265pay name=pay0 pt=96"
3: On another computer: gst-launch-1.0 rtspsrc location=rtsp://172.23.40.28:8554/test ! decodebin ! xvimagesink
************************************************************************************************************************************************
29. Kate Issue
Doesn't load with last session:
https://bugs.launchpad.net/ubuntu/+source/kdesdk/+bug/774985

30. Check VLC instance on UDP: vlc -vv --demux h264 --h264-fps 60 udp://@:5000

31. Problems using VLC on Jetson TX2 - May be try to revert to version 2.2.4?
https://devtalk.nvidia.com/default/topic/990198/
        Hi Patouceul,
        We don't have HW acceleration integrated with vlc(based on ffmpeg). Please try gstreamer or MM APIs.

32. Audio: the following pipe might be ok... 
    >> gst-launch-1.0 filesrc location=ChID-BLITS-EBU-Narration.mp4 ! qtdemux name=demux demux.audio_0 ! queue ! avdec_aac ! audioconvert ! alsasink -e
List of audio devices:
    >> ls /proc/asound -l
Parameters of alsasink: device_name or card_name: ok - device: didn't find right syntax.

33. tegrastat:
EMC – memory controller 
AVP – audio/video processor
VDE – video decoder engine
GR3D – GPU

RAM 3330/7853MB (lfb 379x4MB) SWAP 0/3926MB (cached 0MB) CPU [13%@345,off,off,13%@345,12%@345,18%@345] EMC_FREQ 0% GR3D_FREQ 0% PLL@43.5C MCPU@43.5C PMIC@100C Tboard@41C GPU@43.5C BCPU@43.5C thermal@43.8C Tdiode@42.25C VDD_SYS_GPU 83/117 VDD_SYS_SOC 629/711 VDD_4V0_WIFI 0/15 VDD_IN 2603/2879 VDD_SYS_CPU 167/152 VDD_SYS_DDR 538/661
RAM 3349/7853MB (lfb 378x4MB) SWAP 0/3926MB (cached 0MB) CPU [27%@499,off,off,20%@499,22%@499,25%@499] EMC_FREQ 0% GR3D_FREQ 21% PLL@42C MCPU@42C PMIC@100C Tboard@39C GPU@42C BCPU@42C thermal@41.8C Tdiode@40.75C VDD_SYS_GPU 125/104 VDD_SYS_SOC 1131/722 VDD_4V0_WIFI 0/0 VDD_IN 3670/2862 VDD_SYS_CPU 251/193 VDD_SYS_DDR 942/641
With sudo:
RAM 3343/7853MB (lfb 378x4MB) SWAP 0/3926MB (cached 0MB) CPU [7%@345,off,off,3%@345,4%@345,3%@345]     EMC_FREQ 1%@1062 GR3D_FREQ 0%@114 APE 150 PLL@41.5C MCPU@41.5C PMIC@100C Tboard@40C GPU@42C BCPU@41.5C thermal@41.7C Tdiode@40.5C VDD_SYS_GPU 83/83 VDD_SYS_SOC 419/381 VDD_4V0_WIFI 288/64 VDD_IN 2498/2197 VDD_SYS_CPU 125/87 VDD_SYS_DDR 443/391


34.Pipeline for using nvv4l2h264enc with v4l2src
gst-launch-1.0 v4l2src device="/dev/video3" num-buffers=600 ! 'video/x-raw,format=UYVY,interlace-mode=interleaved'  ! nvvidconv ! 'video/x-raw(memory:NVMM), format=(string)I420' ! nvv4l2h264enc bitrate=8000000 ! h264parse ! qtmux ! filesink location=here.mp4 -e

gst-launch-1.0 v4l2src device="/dev/video3" num-buffers=600 ! 'video/x-raw,format=UYVY,interlace-mode=interleaved'  ! nvvidconv ! 'video/x-raw(memory:NVMM), format=(string)I420' ! nvv4l2h264enc bitrate=8000000 ! h264parse ! nvv4l2decoder ! nv3dsink -e
